---
id: strategiz-core-overview
title: Strategiz Core Overview
sidebar_label: Overview
---

# ðŸ—ï¸ Strategiz Core

The backend Java/Spring Boot application powering the Strategiz trading platform. Provides comprehensive APIs for authentication, portfolio management, strategy execution, and exchange integrations.

---

## ðŸŽ¯ What is Strategiz Core?

Strategiz Core is a microservices-based backend platform that provides:

1. **Authentication & Authorization**: Multi-factor authentication (Passkey, TOTP, SMS, OAuth)
2. **Portfolio Management**: Real-time portfolio tracking across multiple exchanges
3. **Strategy Execution**: Algorithmic trading strategy development and deployment
4. **Exchange Integrations**: OAuth connections to Coinbase, Binance, Kraken, and more
5. **Market Data**: Real-time and historical price data aggregation
6. **User Management**: User profiles, preferences, and session management

---

## ðŸ› ï¸ Technology Stack

### Core Framework
- **Java 17** - Programming language
- **Spring Boot 3.x** - Application framework
- **Spring Security** - Authentication and authorization
- **Spring Data** - Data access abstraction

### Data Storage
- **Google Firestore** - NoSQL database for user data, portfolios, strategies
- **HashiCorp Vault** - Secure credential storage for OAuth tokens and API keys
- **Redis** - Session management and caching (future)

### External Integrations
- **Google OAuth 2.0** - Social login
- **Facebook OAuth** - Social login
- **Coinbase API** - Crypto exchange integration
- **Binance API** - Crypto exchange integration
- **Kraken API** - Crypto exchange integration
- **Yahoo Finance API** - Market data and price enrichment
- **TwilioSendGrid** - SMS authentication

### Build & Deployment
- **Gradle** - Build automation
- **Docker** - Containerization
- **Google Cloud Run** - Serverless deployment
- **Google Cloud Build** - CI/CD pipeline

---

## ðŸ“ Module Structure

```
strategiz-core/
â”œâ”€â”€ application/          # Main Spring Boot application
â”œâ”€â”€ service/             # REST API controllers
â”‚   â”œâ”€â”€ service-auth/   # Authentication endpoints
â”‚   â”œâ”€â”€ service-provider/ # Exchange connection endpoints
â”‚   â”œâ”€â”€ service-portfolio/ # Portfolio management
â”‚   â”œâ”€â”€ service-strategy/ # Strategy execution
â”‚   â””â”€â”€ ...
â”œâ”€â”€ business/            # Business logic layer
â”‚   â”œâ”€â”€ business-token-auth/ # Token management
â”‚   â”œâ”€â”€ business-portfolio/ # Portfolio calculations
â”‚   â”œâ”€â”€ business-provider-*/ # Provider-specific logic
â”‚   â””â”€â”€ ...
â”œâ”€â”€ client/              # External API clients
â”‚   â”œâ”€â”€ client-coinbase/ # Coinbase API client
â”‚   â”œâ”€â”€ client-binance/  # Binance API client
â”‚   â”œâ”€â”€ client-yahoofinance/ # Market data client
â”‚   â””â”€â”€ ...
â”œâ”€â”€ data/                # Data access layer
â”‚   â”œâ”€â”€ data-user/      # User repository
â”‚   â”œâ”€â”€ data-provider/  # Provider repository
â”‚   â”œâ”€â”€ data-portfolio/ # Portfolio repository
â”‚   â””â”€â”€ ...
â””â”€â”€ framework/           # Shared framework code
    â”œâ”€â”€ framework-exception/ # Exception handling
    â”œâ”€â”€ framework-logging/ # Logging utilities
    â””â”€â”€ framework-secrets/ # Vault integration
```

---

## ðŸš€ Quick Start

### Prerequisites
- **Java 17+**
- **Gradle 8+**
- **HashiCorp Vault** (for local development)
- **Google Cloud SDK** (for deployment)

### Local Development Setup

1. **Install HashiCorp Vault**
   ```bash
   brew tap hashicorp/tap
   brew install hashicorp/tap/vault
   ```

2. **Start Vault in Development Mode**
   ```bash
   ./scripts/local/start-vault-local.sh
   ```

3. **Build the Project**
   ```bash
   ./scripts/local/build.sh
   ```

4. **Run the Application**
   ```bash
   cd application
   mvn spring-boot:run
   ```

5. **Access the Application**
   - Backend API: `http://localhost:8080`
   - Vault UI: `http://localhost:8200` (token: `strategiz-local-token`)
   - Swagger UI: `http://localhost:8080/swagger-ui.html`

---

## ðŸ”‘ Key Features

### 1. Multi-Factor Authentication

**Supported Methods:**
- **Passkeys (WebAuthn)**: Biometric authentication
- **TOTP**: Google Authenticator, Authy
- **SMS OTP**: Phone-based verification
- **OAuth**: Google, Facebook

**Endpoints:**
- `POST /v1/auth/passkey/register` - Register passkey
- `POST /v1/auth/passkey/verify` - Verify passkey
- `POST /v1/auth/totp/setup` - Setup TOTP
- `POST /v1/auth/totp/verify` - Verify TOTP
- `POST /v1/auth/sms/send` - Send SMS OTP
- `POST /v1/auth/sms/verify` - Verify SMS OTP

### 2. Provider Integrations

**OAuth Flow:**
```
User clicks "Connect Coinbase"
â†’ Redirect to Coinbase OAuth
â†’ User authorizes
â†’ Callback to /v1/providers/callback/coinbase
â†’ Exchange code for tokens
â†’ Store tokens in Vault
â†’ Fetch portfolio data
â†’ Enrich with market prices
â†’ Store in Firestore
```

**Supported Providers:**
- Coinbase (Production)
- Binance US (Production)
- Kraken (Production)
- Charles Schwab (Planned)
- Interactive Brokers (Planned)

### 3. Portfolio Management

**Features:**
- Real-time portfolio value calculation
- Multi-provider aggregation
- Asset allocation analysis
- Performance tracking
- Historical snapshots

**Data Flow:**
```
Raw Provider Data (Coinbase API)
â†’ Portfolio Enrichment (add market prices)
â†’ Value Calculation (qty Ã— price)
â†’ Aggregation (across providers)
â†’ Store in Firestore
â†’ Return to Frontend
```

### 4. Strategy Execution

**Languages Supported:**
- Python
- Java
- PineScript (TradingView)

**Features:**
- Backtesting with historical data
- Paper trading with simulated funds
- Live execution with real accounts
- Performance metrics (ROI, Sharpe ratio, max drawdown)

---

## ðŸ›ï¸ Architecture Patterns

### Layered Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     REST Controllers        â”‚  service/*
â”‚   (HTTP Request Handlers)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Business Logic          â”‚  business/*
â”‚  (Domain-specific logic)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     External Clients        â”‚  client/*
â”‚   (Third-party APIs)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Data Repositories       â”‚  data/*
â”‚  (Firestore, Vault access)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Module Dependencies

```
service-provider
  â”œâ”€â†’ business-provider-coinbase
  â”‚     â”œâ”€â†’ client-coinbase
  â”‚     â””â”€â†’ data-provider
  â”œâ”€â†’ business-portfolio
  â”‚     â”œâ”€â†’ client-yahoofinance
  â”‚     â””â”€â†’ data-portfolio
  â””â”€â†’ framework-secrets
        â””â”€â†’ client-vault
```

### Base Classes Pattern

All controllers extend `BaseController`:
```java
@RestController
public class AuthController extends BaseController {
    // Inherits error handling, logging, validation
}
```

All services extend `BaseService`:
```java
@Service
public class AuthService extends BaseService {
    // Inherits logging, metrics, common utilities
}
```

---

## ðŸ” Security

### Token Management
- **Access Tokens**: JWT, 15-minute expiration
- **Refresh Tokens**: 30-day expiration, stored securely
- **Rotation**: Automatic token refresh before expiration

### Credential Storage
- **HashiCorp Vault**: OAuth tokens, API keys, secrets
- **Encryption**: All credentials encrypted at rest
- **Access Control**: Role-based access to secrets

### API Security
- **HTTPS**: All endpoints require TLS
- **CORS**: Configured for frontend origins only
- **Rate Limiting**: Prevent abuse and DDoS
- **Input Validation**: Spring validation on all requests

---

## ðŸ“Š API Endpoints

### Authentication
- `POST /v1/auth/signup` - User registration
- `POST /v1/auth/signin` - User login
- `POST /v1/auth/refresh` - Refresh access token
- `POST /v1/auth/logout` - User logout

### Providers
- `GET /v1/providers` - List connected providers
- `POST /v1/providers/connect/{provider}` - Initiate OAuth
- `GET /v1/providers/callback/{provider}` - OAuth callback
- `DELETE /v1/providers/{providerId}` - Disconnect provider

### Portfolio
- `GET /v1/portfolio` - Get aggregated portfolio
- `GET /v1/portfolio/providers/{providerId}` - Get provider-specific portfolio
- `GET /v1/portfolio/history` - Get historical snapshots

### Strategies
- `GET /v1/strategies` - List user strategies
- `POST /v1/strategies` - Create new strategy
- `POST /v1/strategies/{id}/backtest` - Run backtest
- `POST /v1/strategies/{id}/deploy` - Deploy to live trading

**Full API Reference**: See [API Documentation](../api/endpoints.md)

---

## ðŸ§ª Testing

### Unit Tests
```bash
./gradlew test
```

### Integration Tests
```bash
./gradlew integrationTest
```

### Test Coverage
- **Target**: > 80% code coverage
- **Report**: Generated in `build/reports/jacoco/`

---

## ðŸš€ Deployment

### Development
```bash
# Local development with Vault
./scripts/local/start-vault-local.sh
cd application && mvn spring-boot:run
```

### Staging
```bash
# Deploy to Google Cloud Run (staging)
./scripts/deployment/staging/deploy-cloud-run.sh
```

### Production
```bash
# Deploy to Google Cloud Run (production)
./scripts/deployment/production/build-and-deploy-cloud-run.sh
```

**Deployment Guide**: See [Deployment Documentation](../deployment/overview.md)

---

## ðŸ“š Module Documentation

### Service Layer
- [Service Auth](service/service-auth.md) - Authentication endpoints
- [Service Provider](service/service-provider.mdx) - Exchange integrations
- [Service Portfolio](service/service-portfolio.md) - Portfolio management
- [Service Strategy](service/service-strategy.md) - Strategy execution

### Business Layer
- [Business Token Auth](business/business-token-auth.md) - Token management
- [Business Portfolio](business/business-portfolio.md) - Portfolio calculations
- [Business Provider Coinbase](business/business-provider-coinbase.md) - Coinbase logic
- [Business Provider Kraken](business/business-provider-kraken.md) - Kraken logic

### Client Layer
- [Client Coinbase](client/client-coinbase.md) - Coinbase API client
- [Client Binance](client/client-binanceus.md) - Binance API client
- [Client Yahoo Finance](client/client-yahoofinance.md) - Market data client

### Data Layer
- [Data User](data/data-user.md) - User repository
- [Data Provider](data/data-provider.md) - Provider repository
- [Data Portfolio](data/data-portfolio.md) - Portfolio repository

---

## ðŸ¤ Contributing

### Development Workflow
1. Clone repository
2. Create feature branch
3. Follow [Base Classes Standards](../development/base-classes-standards.md)
4. Write unit tests
5. Submit pull request

### Code Standards
- Follow Java naming conventions
- Extend BaseController and BaseService
- Add Javadoc comments
- Maintain > 80% test coverage

---

## ðŸ“„ License

Proprietary software owned by Strategiz, Inc.

---

## ðŸ“ž Support

- **Documentation**: https://docs.strategiz.io
- **Email**: dev@strategiz.io
- **GitHub Issues**: https://github.com/strategiz/strategiz-core/issues

---

**Last Updated**: 2025-10-26
**Version**: 1.0.0
**Maintained by**: Strategiz Engineering Team
